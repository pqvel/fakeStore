(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{24:function(t,e,c){},25:function(t,e,c){},27:function(t,e,c){},28:function(t,e,c){},36:function(t,e,c){},37:function(t,e,c){},38:function(t,e,c){},39:function(t,e,c){},40:function(t,e,c){},41:function(t,e,c){},42:function(t,e,c){"use strict";c.r(e);var n=c(1),a=c.n(n),r=c(12),s=c.n(r),i=(c(24),c(25),c(0)),o=c(8),u=c(2),l=(c(27),function(){return Object(i.jsx)("div",{className:"header",children:Object(i.jsxs)("div",{className:"header__container",children:[Object(i.jsx)("div",{className:"header__logo",children:Object(i.jsx)(o.b,{className:"header__logo-link",to:"/",children:"FakeStore"})}),Object(i.jsxs)("ul",{className:"header__menu-list",children:[Object(i.jsxs)("li",{className:"header__list-item",children:[Object(i.jsx)(o.c,{className:function(t){return"header__link header__link--heart"+(t?"":" header__link--active")},to:"/favourite",children:"Favourite"}),Object(i.jsx)("span",{})]}),Object(i.jsxs)("li",{className:"header__list-item",children:[Object(i.jsx)(o.c,{className:function(t){return"header__link header__link--cart"+(t?"":" header__link--active")},to:"/cart",children:"Cart"}),Object(i.jsx)("span",{})]})]})]})})}),d=c(4),j=(c(28),c(14)),b=c.n(j),O=c(16),_=function(){var t=Object(n.useState)("idle"),e=Object(d.a)(t,2),c=(e[0],e[1]),a=Object(n.useCallback)(function(){var t=Object(O.a)(b.a.mark((function t(e){var n,a,r,s,i,o=arguments;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"GET",a=o.length>2&&void 0!==o[2]?o[2]:null,r=o.length>3&&void 0!==o[3]?o[3]:{"Content-Type":"application/json"},c("loading"),t.prev=4,t.next=7,fetch(e,{method:n,body:a,headers:r});case 7:if((s=t.sent).ok){t.next=10;break}throw new Error("Could not fetch ".concat(e,", status: ").concat(s.status));case 10:return t.next=12,s.json();case 12:return i=t.sent,t.abrupt("return",i);case 16:throw t.prev=16,t.t0=t.catch(4),c("error"),t.t0;case 20:case"end":return t.stop()}}),t,null,[[4,16]])})));return function(e){return t.apply(this,arguments)}}());Object(n.useCallback)((function(){c("loading")}),[]);return{request:a}},p=c(5),m=(c(36),c(37),function(t){var e=t.value,c=Object(n.useState)(0),a=Object(d.a)(c,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){!function(){var t=e/.05;s((function(e){return t}))}()}),[e]),Object(i.jsxs)("div",{className:"rating",children:[Object(i.jsxs)("div",{className:"rating__body",children:[Object(i.jsx)("div",{className:"rating__active",style:{width:"".concat(r,"%")}}),Object(i.jsxs)("div",{className:"rating__items",children:[Object(i.jsx)("input",{className:"rating__item",type:"radio",value:"1",name:"rating"}),Object(i.jsx)("input",{className:"rating__item",type:"radio",value:"2",name:"rating"}),Object(i.jsx)("input",{className:"rating__item",type:"radio",value:"3",name:"rating"}),Object(i.jsx)("input",{className:"rating__item",type:"radio",value:"4",name:"rating"}),Object(i.jsx)("input",{className:"rating__item",type:"radio",value:"5",name:"rating"})]})]}),Object(i.jsx)("div",{className:"rating__value",children:e})]})}),h=function(t){var e=t.id,c=t.title,n=t.image,a=(t.descr,t.price),r=t.rate;return Object(i.jsx)("li",{children:Object(i.jsxs)(o.b,{to:"/product/".concat(e),className:"product",children:[Object(i.jsxs)("div",{className:"product__img-block",children:[Object(i.jsx)("img",{className:"product__img",src:n,alt:c}),Object(i.jsx)("div",{className:"product__rate",children:Object(i.jsx)(m,{value:r})})]}),Object(i.jsx)("span",{className:"product__title",children:function(t){if(t.length>20){var e=t.slice(0,20)+"...";return" "===e[19]?e.slice(0,19)+"...":e}return t}(c)}),Object(i.jsx)("span",{className:"product__descr"}),Object(i.jsxs)("span",{className:"product__price",children:[a," $"]}),Object(i.jsxs)("div",{className:"product__buttons",children:[Object(i.jsx)("button",{className:"product__button product__button-favourite"}),Object(i.jsx)("button",{className:"product__button product__button-cart"})]})]})})},f=c(43),x=function(t){return console.log(t),{type:"ADD_PRODUCTS_TO_CART",payload:t}},v=function(){var t=Object(p.b)(),e=Object(p.c)((function(t){return t.products})),c=Object(n.useState)(!1),a=Object(d.a)(c,2),r=a[0],s=a[1],o=_().request;Object(n.useEffect)((function(){u()}),[]);var u=function(){var c=0===e.length?8:4;o("https://fakestoreapi.com/products?limit=".concat(e.length+c)).then((function(e){20===e.length&&s((function(t){return!0})),e=l(e),t(function(t){return{type:"FETCHED__PRODUCTS",payload:t}}(e))})).catch((function(e){return t({type:"FETCHING__PRODUCTS__ERROR"})}))},l=function(t){return t.slice(e.length,t.length)},j=e.map((function(t){return Object(i.jsx)(h,{id:t.id,title:t.title,image:t.image,descr:t.description,price:t.price,rate:t.rating.rate},Object(f.a)())}));return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("ul",{className:"product-list",children:j}),Object(i.jsx)("button",{disabled:r,className:r?"product-list__button product-list__button--disable":"product-list__button",onClick:function(t){return u(t)},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"})]})},g=(c(38),function(){return Object(i.jsx)("div",{className:"main-page",children:Object(i.jsx)("div",{className:"main-page__container",children:Object(i.jsx)(v,{})})})}),N=c(10),C=c(3),y=(c(39),function(t){var e=t.product,c=t.onAddToCart,n=e.image,a=e.rating,r=e.title,s=e.description,o=e.price,u=e.category;return Object(i.jsx)("div",{className:"product-page",children:Object(i.jsxs)("div",{className:"product-page__container",children:[Object(i.jsx)("div",{className:"product-page__img-block",children:Object(i.jsx)("img",{className:"product-page__img",src:n,alt:"ffrfrg"})}),Object(i.jsxs)("div",{className:"product-page__content",children:[Object(i.jsx)("div",{className:"product-page__rate",children:Object(i.jsx)(m,{value:a.rate})}),Object(i.jsx)("h4",{className:"product-page__title",children:r}),Object(i.jsxs)("span",{className:"product-page__price",children:[o," $"]}),Object(i.jsx)("p",{className:"product-page__descr",children:s}),Object(i.jsxs)("span",{className:"product-page__category",children:["category: ",Object(i.jsx)("span",{children:u})]}),Object(i.jsxs)("div",{className:"btns-block",children:[Object(i.jsx)("button",{className:"btn",onClick:function(){return c(e)},children:"Add to cart"}),Object(i.jsx)("button",{className:"btn",children:"Add to favourite"})]})]})]})})}),T=function(){var t=Object(p.b)(),e=Object(p.c)((function(t){return t.products})),c=Object(p.c)((function(t){return t.cartProducts})),a=Object(u.g)().productId,r=Object(n.useState)(null),s=Object(d.a)(r,2),o=s[0],l=s[1],j=_().request;Object(n.useEffect)((function(){b()}),[]);var b=function(){var t=new Promise((function(t,c){var n=e.find((function(t){return t.id==a}));"undefined"==n||null==n?(c("product dosn't exist in store"),console.log(n)):t(n)})),c=new Promise((function(t){j("https://fakestoreapi.com/products/".concat(a)).then((function(e){return t(e)})).catch((function(t){return console.log(t)}))}));Promise.any([t,c]).then((function(t){return l((function(e){return t}))})).catch((function(t){return console.log(t)}))};return Object(i.jsx)("div",{children:o?Object(i.jsx)(y,{product:o,onAddToCart:function(e){var n=c.findIndex((function(t){return t.id===e.id}));if(console.log("product index: ".concat(n)),-1===n){console.log("render 1");var a=Object(C.a)(Object(C.a)({},e),{},{count:1}),r=[].concat(Object(N.a)(c),[a]);t(x(r))}else{console.log("render 2");var s=c.map((function(t,e){return e===n?Object(C.a)(Object(C.a)({},t),{},{count:t.count+1}):t}));t(x(s))}}}):"\u0437\u0430\u0433\u0440\u0443\u043a\u0430"})},E=function(){return Object(i.jsx)("span",{children:"FAVOURITE PAGE"})},P=(c(40),function(t){var e=t.count,c=t.onCalcInputValue;return Object(i.jsxs)("div",{className:"product-input",children:[Object(i.jsx)("input",{className:"product-input__input",type:"number",min:"0",max:"100",readOnly:!0,value:e}),Object(i.jsxs)("b",{className:"product-input__plus",onClick:function(){return c(1)},children:[Object(i.jsx)("i",{className:"product-input__plus-item-1"}),Object(i.jsx)("i",{className:"product-input__plus-item-2"})]}),Object(i.jsx)("b",{className:"product-input__minus",onClick:function(){return c(-1)},children:Object(i.jsx)("i",{className:"product-input__minus-item-1"})})]})}),k=Object(n.memo)(P,(function(t,e){return t.count===e.count})),R=function(t){var e=t.title,c=t.price,a=t.id,r=t.onDelete,s=Object(p.b)(),o=Object(p.c)((function(t){return t.cartProducts.find((function(t){return t.id===a})).count})),u=Object(n.useCallback)((function(t){-1===t&&0===o||(1===t&&100===o||s({type:"CHANGE_PRODUCT_COUNT",payload:{id:a,count:o+t}}))}));return Object(i.jsxs)("tr",{className:0!==o?"cart__table-row":"cart__table-row cart__table-row--empty",children:[Object(i.jsx)("td",{className:"cart__table-column",children:e}),Object(i.jsxs)("td",{className:"cart__table-column",children:[c," $"]}),Object(i.jsx)("td",{className:"cart__table-column",children:Object(i.jsx)("div",{className:"cart__table-input-block",children:Object(i.jsx)(k,{onCalcInputValue:u,count:o,id:a})})}),Object(i.jsx)("td",{className:"cart__table-column",children:Object(i.jsx)("button",{className:"cart__table-button-delete",onClick:function(){return r(a)}})})]})},D=function(){return Object(i.jsx)("tr",{className:"cart__table--empty",children:Object(i.jsx)("td",{children:"Your cart is empty. Please select a product to buy"})})},S=Object(n.memo)(D),w=function(){var t=Object(p.b)(),e=Object(p.c)((function(t){return t.cartProducts})),c=0===e.length,a=Object(n.useCallback)((function(e){t(function(t){return{type:"DELETE_PRODUCT_FROM_CART",payload:t}}(e)),console.log("hello")}),[]);return Object(i.jsxs)("table",{className:"cart__table",children:[Object(i.jsx)("thead",{className:"cart__table-head",children:Object(i.jsxs)("tr",{className:"cart__table-row",children:[Object(i.jsx)("td",{className:"cart__table-column",children:"Name:"}),Object(i.jsx)("td",{className:"cart__table-column",children:"Price:"}),Object(i.jsx)("td",{className:"cart__table-column",children:"Amount:"}),Object(i.jsx)("td",{className:"cart__table-column"})]})}),Object(i.jsxs)("tbody",{className:"cart__table-body",children:[e.map((function(t){var e=t.title,c=t.count,n=t.price,r=t.id;return Object(i.jsx)(R,{onDelete:a,title:e,count:c,price:n,id:r},Object(f.a)())})),c?Object(i.jsx)(S,{}):null]})]})},A=function(){var t=Object(p.b)(),e=Object(p.c)((function(t){return t.cartProducts})),c=Object(p.c)((function(t){return t.promoArr})),a=Object(n.useState)(0),r=Object(d.a)(a,2),s=r[0],o=r[1],u=Object(n.useState)(0),l=Object(d.a)(u,2),j=l[0],b=l[1],O=Object(n.useState)(""),_=Object(d.a)(O,2),m=_[0],h=_[1],f=Object(n.useState)(1),x=Object(d.a)(f,2),v=x[0],g=x[1],N=Object(n.useState)(!1),C=Object(d.a)(N,2),y=C[0],T=C[1];Object(n.useEffect)((function(){var t=e.reduce((function(t,e){return t+e.price*e.count}),0);o((function(e){return Math.ceil(t*v*100)/100}))}),[e,v]),Object(n.useEffect)((function(){var t=e.reduce((function(t,e){return t+e.count}),0);b((function(e){return t}))}),[e]),Object(n.useEffect)((function(){0===e.length&&T(!0),!1===y&&e.length>0&&T(!1)}),[e]);return Object(i.jsxs)("div",{className:"cart__sidebar",children:[Object(i.jsx)("h4",{className:"cart__sidebar-title",children:"Total:"}),Object(i.jsxs)("span",{className:"cart__sidebar-total",children:["Price: ",s," $"]}),Object(i.jsxs)("span",{className:"cart__sidebar-total",children:["Total goods: ",j]}),Object(i.jsx)("input",{className:"cart__sidebar-input",placeholder:"Promo code",value:m,onChange:function(t){return function(t){var e=t.target.value;h((function(t){return e})),c.forEach((function(t){g(e===t?function(t){return.9}:function(t){return 1})}))}(t)}}),Object(i.jsx)("button",{onClick:function(){0!==e.length&&(t({type:"DELETE_ALL_PRODUCTS_FROM_CART"}),h((function(t){return""})))},disabled:y,className:y?"cart__sidebar-button cart__sidebar-button--disable":"cart__sidebar-button",children:"Checkout"})]})},U=(c(41),function(){return Object(i.jsxs)("div",{className:"cart",children:[Object(i.jsx)(w,{}),Object(i.jsx)(A,{})]})}),F=function(){return Object(i.jsx)(o.a,{children:Object(i.jsxs)("div",{className:"app",children:[Object(i.jsx)(l,{}),Object(i.jsx)("main",{className:"main",children:Object(i.jsxs)(u.c,{children:[Object(i.jsx)(u.a,{path:"/favourite",element:Object(i.jsx)(E,{})}),Object(i.jsx)(u.a,{path:"/cart",element:Object(i.jsx)(U,{})}),Object(i.jsx)(u.a,{path:"/product/:productId",element:Object(i.jsx)(T,{})}),Object(i.jsx)(u.a,{path:"/",element:Object(i.jsx)(g,{})})]})})]})})},I=c(18),L={products:[],cartProducts:[],favouriteProducts:[],loadingStatus:"idle",promoArr:["123_ddd","hello_worls","oleg"]},G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCHING__PRODUCTS":return Object(C.a)(Object(C.a)({},t),{},{loadingStatus:"loading"});case"FETCHED__PRODUCTS":return Object(C.a)(Object(C.a)({},t),{},{products:[].concat(Object(N.a)(t.products),Object(N.a)(e.payload)),loadingStatus:"idle"});case"FETCHING__PRODUCTS__ERROR":return Object(C.a)(Object(C.a)({},t),{},{loadingStatus:"error"});case"DELETE_PRODUCT_FROM_CART":var c=t.cartProducts,n=c.filter((function(t){return t.id!==e.payload}));return Object(C.a)(Object(C.a)({},t),{},{cartProducts:n});case"ADD_PRODUCTS_TO_CART":return console.log(e.payload),Object(C.a)(Object(C.a)({},t),{},{cartProducts:Object(N.a)(e.payload)});case"CHANGE_PRODUCT_COUNT":var a=t.cartProducts.findIndex((function(t){return t.id===e.payload.id})),r=t.cartProducts.map((function(t,c){return c!==a?t:Object(C.a)(Object(C.a)({},t),{},{count:e.payload.count})}));return Object(C.a)(Object(C.a)({},t),{},{cartProducts:r});case"DELETE_ALL_PRODUCTS_FROM_CART":return Object(C.a)(Object(C.a)({},t),{},{cartProducts:[]});default:return t}},H=Object(I.a)({reducer:G,middleware:function(t){return t().concat()},devTools:!1});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(p.a,{store:H,children:Object(i.jsx)(F,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.aa9fc066.chunk.js.map