(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{24:function(t,e,c){},25:function(t,e,c){},27:function(t,e,c){},28:function(t,e,c){},36:function(t,e,c){},37:function(t,e,c){},38:function(t,e,c){},39:function(t,e,c){},40:function(t,e,c){},41:function(t,e,c){},42:function(t,e,c){"use strict";c.r(e);var n=c(1),a=c.n(n),r=c(11),s=c.n(r),i=(c(24),c(25),c(0)),l=c(8),o=c(2),u=(c(27),function(){return Object(i.jsx)("div",{className:"header",children:Object(i.jsxs)("div",{className:"header__container",children:[Object(i.jsx)("div",{className:"header__logo",children:Object(i.jsx)(l.b,{className:"header__logo-link",to:"/",children:"FakeStore"})}),Object(i.jsxs)("ul",{className:"header__menu-list",children:[Object(i.jsxs)("li",{className:"header__list-item",children:[Object(i.jsx)(l.c,{className:function(t){return"header__link header__link--heart"+(t?"":" header__link--active")},to:"/favourite",children:"Favourite"}),Object(i.jsx)("span",{})]}),Object(i.jsxs)("li",{className:"header__list-item",children:[Object(i.jsx)(l.c,{className:function(t){return"header__link header__link--cart"+(t?"":" header__link--active")},to:"/cart",children:"Cart"}),Object(i.jsx)("span",{})]})]})]})})}),d=c(3),j=(c(28),c(13)),b=c.n(j),O=c(16),_=function(){var t=Object(n.useState)("idle"),e=Object(d.a)(t,2),c=(e[0],e[1]),a=Object(n.useCallback)(function(){var t=Object(O.a)(b.a.mark((function t(e){var n,a,r,s,i,l=arguments;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",a=l.length>2&&void 0!==l[2]?l[2]:null,r=l.length>3&&void 0!==l[3]?l[3]:{"Content-Type":"application/json"},c("loading"),t.prev=4,t.next=7,fetch(e,{method:n,body:a,headers:r});case 7:if((s=t.sent).ok){t.next=10;break}throw new Error("Could not fetch ".concat(e,", status: ").concat(s.status));case 10:return t.next=12,s.json();case 12:return i=t.sent,t.abrupt("return",i);case 16:throw t.prev=16,t.t0=t.catch(4),c("error"),t.t0;case 20:case"end":return t.stop()}}),t,null,[[4,16]])})));return function(e){return t.apply(this,arguments)}}());Object(n.useCallback)((function(){c("loading")}),[]);return{request:a}},p=c(4),f=(c(36),c(37),function(t){var e=t.value,c=Object(n.useState)(0),a=Object(d.a)(c,2),r=a[0],s=a[1];return Object(n.useEffect)((function(){!function(){var t=e/.05;s((function(e){return t}))}()}),[e]),Object(i.jsxs)("div",{className:"rating",children:[Object(i.jsxs)("div",{className:"rating__body",children:[Object(i.jsx)("div",{className:"rating__active",style:{width:"".concat(r,"%")}}),Object(i.jsxs)("div",{className:"rating__items",children:[Object(i.jsx)("input",{className:"rating__item",type:"radio",value:"1",name:"rating"}),Object(i.jsx)("input",{className:"rating__item",type:"radio",value:"2",name:"rating"}),Object(i.jsx)("input",{className:"rating__item",type:"radio",value:"3",name:"rating"}),Object(i.jsx)("input",{className:"rating__item",type:"radio",value:"4",name:"rating"}),Object(i.jsx)("input",{className:"rating__item",type:"radio",value:"5",name:"rating"})]})]}),Object(i.jsx)("div",{className:"rating__value",children:e})]})}),m=function(t){var e=t.id,c=t.title,n=t.image,a=(t.descr,t.price),r=t.rate;return Object(i.jsx)("li",{children:Object(i.jsxs)(l.b,{to:"/product/".concat(e),className:"product",children:[Object(i.jsxs)("div",{className:"product__img-block",children:[Object(i.jsx)("img",{className:"product__img",src:n,alt:c}),Object(i.jsx)("div",{className:"product__rate",children:Object(i.jsx)(f,{value:r})})]}),Object(i.jsx)("span",{className:"product__title",children:function(t){if(t.length>20){var e=t.slice(0,20)+"...";return" "===e[19]?e.slice(0,19)+"...":e}return t}(c)}),Object(i.jsx)("span",{className:"product__descr"}),Object(i.jsxs)("span",{className:"product__price",children:[a," $"]})]})})},h=c(43),x=function(){var t=Object(p.b)(),e=Object(p.c)((function(t){return t.products})),c=Object(n.useState)(!1),a=Object(d.a)(c,2),r=a[0],s=a[1],l=_().request;Object(n.useEffect)((function(){o()}),[]);var o=function(){var c=0===e.length?8:4;l("https://fakestoreapi.com/products?limit=".concat(e.length+c)).then((function(e){20===e.length&&s((function(t){return!0})),e=u(e),t(function(t){return{type:"FETCHED__PRODUCTS",payload:t}}(e))})).catch((function(e){return t({type:"FETCHING__PRODUCTS__ERROR"})}))},u=function(t){return t.slice(e.length,t.length)},j=e.map((function(t){return Object(i.jsx)(m,{id:t.id,title:t.title,image:t.image,descr:t.description,price:t.price,rate:t.rating.rate},Object(h.a)())}));return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("ul",{className:"product-list",children:j}),Object(i.jsx)("button",{disabled:r,className:r?"product-list__button product-list__button--disable":"product-list__button",onClick:function(t){return o(t)},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"})]})},v=(c(38),function(){return Object(i.jsx)("div",{className:"main-page",children:Object(i.jsx)("div",{className:"main-page__container",children:Object(i.jsx)(x,{})})})}),N=(c(39),function(t){var e=t.product,c=e.image,n=e.rating,a=e.title,r=e.description,s=e.price,l=e.category;return Object(i.jsx)("div",{className:"product-page",children:Object(i.jsxs)("div",{className:"product-page__container",children:[Object(i.jsx)("div",{className:"product-page__img-block",children:Object(i.jsx)("img",{className:"product-page__img",src:c,alt:"ffrfrg"})}),Object(i.jsxs)("div",{className:"product-page__content",children:[Object(i.jsx)("div",{className:"product-page__rate",children:Object(i.jsx)(f,{value:n.rate})}),Object(i.jsx)("h4",{className:"product-page__title",children:a}),Object(i.jsxs)("span",{className:"product-page__price",children:[s," $"]}),Object(i.jsx)("p",{className:"product-page__descr",children:r}),Object(i.jsxs)("span",{className:"product-page__category",children:["category: ",Object(i.jsx)("span",{children:l})]}),Object(i.jsxs)("div",{className:"btns-block",children:[Object(i.jsx)("button",{className:"btn",children:"Add to cart"}),Object(i.jsx)("button",{className:"btn",children:"Add to favourite"})]})]})]})})}),g=function(){var t=Object(p.c)((function(t){return t.products})),e=Object(o.g)().productId,c=Object(n.useState)(null),a=Object(d.a)(c,2),r=a[0],s=a[1],l=_().request;Object(n.useEffect)((function(){u()}),[]);var u=function(){var c=new Promise((function(c,n){var a=t.find((function(t){return t.id==e}));"undefined"==a||null==a?(n("product dosn't exist in store"),console.log(a)):c(a)})),n=new Promise((function(t){l("https://fakestoreapi.com/products/".concat(e)).then((function(e){return t(e)})).catch((function(t){return console.log(t)}))}));Promise.any([c,n]).then((function(t){return s((function(e){return t}))})).catch((function(t){return console.log(t)}))};return Object(i.jsx)("div",{children:r?Object(i.jsx)(N,{product:r}):"\u0437\u0430\u0433\u0440\u0443\u043a\u0430"})},w=function(){return Object(i.jsx)("span",{children:"FAVOURITE PAGE"})},C=(c(40),function(t){var e=t.count,c=t.onCalcInputValue;return Object(i.jsxs)("div",{className:"product-input",children:[Object(i.jsx)("input",{className:"product-input__input",type:"number",min:"0",max:"100",readOnly:!0,value:e}),Object(i.jsxs)("b",{className:"product-input__plus",onClick:function(){return c(1)},children:[Object(i.jsx)("i",{className:"product-input__plus-item-1"}),Object(i.jsx)("i",{className:"product-input__plus-item-2"})]}),Object(i.jsx)("b",{className:"product-input__minus",onClick:function(){return c(-1)},children:Object(i.jsx)("i",{className:"product-input__minus-item-1"})})]})}),y=Object(n.memo)(C,(function(t,e){return t.count===e.count})),E=function(t){var e=t.title,c=t.price,a=t.id,r=t.onDelete,s=Object(p.b)(),l=Object(p.c)((function(t){return t.cartProducts.find((function(t){return t.id===a})).count})),o=Object(n.useCallback)((function(t){-1===t&&0===l||(1===t&&100===l||s({type:"CHANGE_PRODUCT_COUNT",payload:{id:a,count:l+t}}))}));return Object(i.jsxs)("tr",{className:0!==l?"cart__table-row":"cart__table-row cart__table-row--empty",children:[Object(i.jsx)("td",{className:"cart__table-column",children:e}),Object(i.jsxs)("td",{className:"cart__table-column",children:[c," $"]}),Object(i.jsx)("td",{className:"cart__table-column",children:Object(i.jsx)("div",{className:"cart__table-input-block",children:Object(i.jsx)(y,{onCalcInputValue:o,count:l,id:a})})}),Object(i.jsx)("td",{className:"cart__table-column",children:Object(i.jsx)("button",{className:"cart__table-button-delete",onClick:function(){return r(a)}})})]})},T=function(){return Object(i.jsx)("tr",{className:"cart__table--empty",children:Object(i.jsx)("td",{children:"Your cart is empty. Please select a product to buy"})})},k=Object(n.memo)(T),P=function(){var t=Object(p.b)(),e=Object(p.c)((function(t){return t.cartProducts})),c=0===e.length,a=Object(n.useCallback)((function(e){t(function(t){return{type:"DELETE_PRODUCT_FROM_CART",payload:t}}(e)),console.log("hello")}),[]);return Object(i.jsxs)("table",{className:"cart__table",children:[Object(i.jsx)("thead",{className:"cart__table-head",children:Object(i.jsxs)("tr",{className:"cart__table-row",children:[Object(i.jsx)("td",{className:"cart__table-column",children:"Name:"}),Object(i.jsx)("td",{className:"cart__table-column",children:"Price:"}),Object(i.jsx)("td",{className:"cart__table-column",children:"Amount:"}),Object(i.jsx)("td",{className:"cart__table-column"})]})}),Object(i.jsxs)("tbody",{className:"cart__table-body",children:[e.map((function(t){var e=t.title,c=t.count,n=t.price,r=t.id;return Object(i.jsx)(E,{onDelete:a,title:e,count:c,price:n,id:r},Object(h.a)())})),c?Object(i.jsx)(k,{}):null]})]})},R=function(){var t=Object(p.b)(),e=Object(p.c)((function(t){return t.cartProducts})),c=Object(p.c)((function(t){return t.promoArr})),a=Object(n.useState)(0),r=Object(d.a)(a,2),s=r[0],l=r[1],o=Object(n.useState)(0),u=Object(d.a)(o,2),j=u[0],b=u[1],O=Object(n.useState)(""),_=Object(d.a)(O,2),f=_[0],m=_[1],h=Object(n.useState)(1),x=Object(d.a)(h,2),v=x[0],N=x[1],g=Object(n.useState)(!1),w=Object(d.a)(g,2),C=w[0],y=w[1];Object(n.useEffect)((function(){var t=e.reduce((function(t,e){return t+e.price*e.count}),0);l((function(e){return Math.ceil(t*v*100)/100}))}),[e,v]),Object(n.useEffect)((function(){var t=e.reduce((function(t,e){return t+e.count}),0);b((function(e){return t}))}),[e]),Object(n.useEffect)((function(){0===e.length&&y(!0),!1===C&&e.length>0&&y(!1)}),[e]);return Object(i.jsxs)("div",{className:"cart__sidebar",children:[Object(i.jsx)("h4",{className:"cart__sidebar-title",children:"Total:"}),Object(i.jsxs)("span",{className:"cart__sidebar-total",children:["Price: ",s," $"]}),Object(i.jsxs)("span",{className:"cart__sidebar-total",children:["Total goods: ",j]}),Object(i.jsx)("input",{className:"cart__sidebar-input",placeholder:"Promo code",value:f,onChange:function(t){return function(t){var e=t.target.value;m((function(t){return e})),c.forEach((function(t){N(e===t?function(t){return.9}:function(t){return 1})}))}(t)}}),Object(i.jsx)("button",{onClick:function(){0!==e.length&&(t({type:"DELETE_ALL_PRODUCTS_FROM_CART"}),m((function(t){return""})))},disabled:C,className:C?"cart__sidebar-button cart__sidebar-button--disable":"cart__sidebar-button",children:"Checkout"})]})},S=(c(41),function(){return Object(i.jsxs)("div",{className:"cart",children:[Object(i.jsx)(P,{}),Object(i.jsx)(R,{})]})}),D=function(){return Object(i.jsx)(l.a,{children:Object(i.jsxs)("div",{className:"app",children:[Object(i.jsx)(u,{}),Object(i.jsx)("main",{className:"main",children:Object(i.jsxs)(o.c,{children:[Object(i.jsx)(o.a,{path:"/favourite",element:Object(i.jsx)(w,{})}),Object(i.jsx)(o.a,{path:"/cart",element:Object(i.jsx)(S,{})}),Object(i.jsx)(o.a,{path:"/product/:productId",element:Object(i.jsx)(g,{})}),Object(i.jsx)(o.a,{path:"/",element:Object(i.jsx)(v,{})})]})})]})})},A=c(18),U=c(15),F=c(6),q={products:[],cartProducts:[{title:"tiw",price:1222,count:25,id:"12sdwdwwdfeds"},{title:"titltlwsldaff",price:122,count:5,id:"12sdwdwdwfeds"},{title:"titltlwslfefedaff",price:122,count:5,id:"12sdwdwwdfeddws"},{title:"titltlwslfefedaff",price:122,count:5,id:"12sdwdwwdfedqqqs"},{title:"titltlwslfefedaff",price:122,count:5,id:"12sdwdqqqqwwdfeds"},{title:"titltlwslfefedaff",price:122,count:5,id:"12sdwdwwdfed212s"},{title:"titltlwslfefedaff",price:122,count:5,id:"12sdw21424141dwwdfeds"},{title:"titltlwslfefedaff",price:122,count:5,id:"12sdw21424141dwwdfed4111s"},{title:"titltlwslfefedaff",price:122,count:5,id:"12sdw21424141dwwdf42114eds"}],favouriteProducts:[],loadingStatus:"idle",promoArr:["123_ddd","hello_worls","oleg"]},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FETCHING__PRODUCTS":return Object(F.a)(Object(F.a)({},t),{},{loadingStatus:"loading"});case"FETCHED__PRODUCTS":return Object(F.a)(Object(F.a)({},t),{},{products:[].concat(Object(U.a)(t.products),Object(U.a)(e.payload)),loadingStatus:"idle"});case"FETCHING__PRODUCTS__ERROR":return Object(F.a)(Object(F.a)({},t),{},{loadingStatus:"error"});case"DELETE_PRODUCT_FROM_CART":var c=t.cartProducts,n=c.filter((function(t){return t.id!==e.payload}));return Object(F.a)(Object(F.a)({},t),{},{cartProducts:n});case"CHANGE_PRODUCT_COUNT":var a=t.cartProducts.findIndex((function(t){return t.id===e.payload.id})),r=t.cartProducts.map((function(t,c){return c!==a?t:Object(F.a)(Object(F.a)({},t),{},{count:e.payload.count})}));return Object(F.a)(Object(F.a)({},t),{},{cartProducts:r});case"DELETE_ALL_PRODUCTS_FROM_CART":return Object(F.a)(Object(F.a)({},t),{},{cartProducts:[]});default:return t}},L=Object(A.a)({reducer:I,middleware:function(t){return t().concat()},devTools:!1});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(p.a,{store:L,children:Object(i.jsx)(D,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.a21b11a5.chunk.js.map